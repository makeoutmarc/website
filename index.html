<!DOCTYPE html> <!-- HTML5 Dokumenttyp -->
<html lang="de"> <!-- Sprache der Website = Deutsch -->
<head>
<meta charset="UTF-8"> <!-- Zeichencodierung -->
<meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Mobile Optimierung -->
<title>Essensideen</title> <!-- Titel im Browser-Tab -->

<style>

/* =========================
   GRUNDLAYOUT
========================= */

body {
    font-family: Arial, sans-serif; /* Schriftart */
    background: #f2f2f2; /* Hintergrundfarbe */
    display: flex; /* Flexbox aktivieren */
    justify-content: center; /* Inhalt horizontal zentrieren */
    padding: 40px 20px; /* Au√üenabstand */
}

/* Hauptcontainer */
.container {
    background: white; /* Wei√üer Kasten */
    padding: 30px; /* Innenabstand */
    width: 350px; /* Feste Breite */
    border-radius: 12px; /* Abgerundete Ecken */
    box-shadow: 0 10px 25px rgba(0,0,0,0.1); /* Schatten */
    text-align: center; /* Text zentrieren */
}

/* √úberschrift */
h1 {
    margin-bottom: 20px; /* Abstand nach unten */
}

/* Eingabefeld */
input {
    width: 100%; /* Volle Breite */
    padding: 10px; /* Innenabstand */
    font-size: 16px; /* Schriftgr√∂√üe */
    border-radius: 6px; /* Runde Ecken */
    border: 1px solid #ccc; /* Rahmen */
    margin-bottom: 10px; /* Abstand nach unten */
}

/* Buttons allgemein */
button {
    padding: 10px; /* Innenabstand */
    border: none; /* Kein Rahmen */
    border-radius: 6px; /* Runde Ecken */
    cursor: pointer; /* Mauszeiger = Hand */
    font-weight: bold; /* Fettschrift */
    transition: 0.2s ease; /* Hover-Animation */
}

/* Hinzuf√ºgen Button */
.add-btn {
    background: #2ecc71; /* Gr√ºn */
    color: white; /* Textfarbe */
    width: 100%; /* Volle Breite */
    margin-bottom: 15px; /* Abstand */
}

.add-btn:hover {
    background: #27ae60; /* Dunkleres Gr√ºn bei Hover */
}

/* Zufalls Button */
.random-btn {
    background: #3498db; /* Blau */
    color: white;
    width: 100%;
    margin-top: 15px;
}

.random-btn:hover {
    background: #2980b9; /* Dunkler bei Hover */
}

/* Liste */
ul {
    list-style: none; /* Keine Punkte */
    padding: 0; /* Kein Einzug */
    margin: 0;
}

/* Einzelnes Essen */
.food-item {
    background: #f9f9f9; /* Heller Hintergrund */
    padding: 10px;
    margin-bottom: 8px;
    border-radius: 6px;
    display: flex; /* Flexbox */
    justify-content: space-between; /* Abstand zwischen Text & Button */
    align-items: center; /* Vertikal zentrieren */
}

/* Entfernen Button */
.remove-btn {
    background: red;
    color: white;
    width: 25px;
    height: 25px;
    border-radius: 50%; /* Rund */
}

.remove-btn:hover {
    background: darkred; /* Hover-Effekt */
}

/* Zufallsergebnis */
#result {
    font-size: 22px; /* Gro√üe Schrift */
    font-weight: bold;
    margin-top: 15px;
}

</style>
</head>

<body>

<div class="container"> <!-- Haupt-Box -->

<h1>Vorschl√§ge f√ºrs Essen üçù</h1> <!-- Titel -->

<input type="text" id="foodInput" placeholder="Neues Essen hinzuf√ºgen"> <!-- Eingabefeld -->

<button class="add-btn" onclick="addFood()">Hinzuf√ºgen</button> <!-- Button ruft addFood() auf -->

<ul id="foodList"></ul> <!-- Hier wird die Liste dynamisch eingef√ºgt -->

<button class="random-btn" onclick="pickRandomFood()">üé≤ Zufallsgericht w√§hlen</button> <!-- Zufallsfunktion -->

<div id="result"></div> <!-- Hier wird das Zufallsergebnis angezeigt -->

</div>

<script type="module"> 

// Firebase Imports (Module aus Firebase laden)
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { 
    getFirestore,   // Firestore starten
    collection,     // Collection ausw√§hlen
    addDoc,         // Dokument hinzuf√ºgen
    deleteDoc,      // Dokument l√∂schen
    doc,            // Dokument referenzieren
    onSnapshot      // Echtzeit Listener
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

// Firebase Config (Verbindungsdaten zu deinem Projekt)
const firebaseConfig = {
    apiKey: "AIza...",
    authDomain: "website-essen.firebaseapp.com",
    projectId: "website-essen",
    storageBucket: "website-essen.firebasestorage.app",
    messagingSenderId: "95662683991",
    appId: "1:95662683991:web:0bc5891b804db149647012"
};

// Firebase starten
const app = initializeApp(firebaseConfig); // App initialisieren
const db = getFirestore(app); // Firestore Datenbank starten
const foodsCollection = collection(db, "foods"); // Referenz zur Collection "foods"

let foods = []; // Lokales Array f√ºr alle Gerichte

// Echtzeit Sync: Wird automatisch ausgel√∂st wenn sich Daten √§ndern
onSnapshot(foodsCollection, (snapshot) => {

    foods = []; // Array leeren

    snapshot.forEach((docItem) => { // Jedes Dokument durchgehen
        foods.push({
            id: docItem.id, // Dokument-ID speichern
            name: docItem.data().name // Name speichern
        });
    });

    foods.sort((a,b)=> a.name.localeCompare(b.name)); // Alphabetisch sortieren
    renderList(); // Liste neu anzeigen
});

// Essen hinzuf√ºgen
window.addFood = async function() {

    const input = document.getElementById("foodInput"); // Eingabefeld holen
    const value = input.value.trim(); // Text holen und Leerzeichen entfernen

    if (value === "") return; // Wenn leer ‚Üí abbrechen

    await addDoc(foodsCollection, { name: value }); // Neues Dokument speichern

    input.value = ""; // Eingabefeld leeren
};

// Essen l√∂schen
window.removeFood = async function(id) {
    await deleteDoc(doc(db, "foods", id)); // Dokument anhand ID l√∂schen
};

// Zufallsgericht ausw√§hlen
window.pickRandomFood = function() {

    if (foods.length === 0) return; // Wenn leer ‚Üí abbrechen

    const randomIndex = Math.floor(Math.random() * foods.length); // Zuf√§lliger Index
    document.getElementById("result").innerText = foods[randomIndex].name; // Anzeigen
};

// Liste neu aufbauen
function renderList() {

    const list = document.getElementById("foodList"); // UL holen
    list.innerHTML = ""; // Alte Liste l√∂schen

    foods.forEach((food) => { // Jedes Essen durchgehen

        const li = document.createElement("li"); // Neues Listenelement erstellen
        li.className = "food-item"; // CSS Klasse setzen

        li.innerHTML = `
            ${food.name}
            <button class="remove-btn" onclick="removeFood('${food.id}')">‚àí</button>
        `; // Inhalt setzen

        list.appendChild(li); // Element zur Liste hinzuf√ºgen
    });
}

</script>

</body>
</html>
